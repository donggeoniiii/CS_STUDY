# CS_STUDY

> 📇 목차<br><br> [1. 운영체제](#🖥️-1-운영체제)<br> &emsp; [1) 의미](#1-의미)<br> &emsp; [2) 역할](#2-역할)<br> &emsp; [3) 프로세스와 스레드](#3-프로세스와-스레드)<br> &emsp; [4) 프로세스의 주소공간](#4-프로세스의-주소-공간)<br>

## 🖥️ 1. 운영체제

---

### 1) 의미

**사용자가 컴퓨터를 편리하고 효과적으로 사용할 수 있도록 환경을 제공하는 시스템 소프트웨어**

하드웨어를 관리하고 컴퓨터 시스템의 자원들을 효율적으로 관리하며, 응용프로그램과 하드웨어 간의 인터페이스로써 다른 응용 프로그램이 유용한 작업을 할 수 있도록 환경을 제공한다.<br>
<span style="color:gray">
(ex) Windows, Linux, UNIX, MS-DOS
</span>

---

### 2) 역할

#### (1) 프로세스 관리

**운영체제에서 작동하는 응용 프로그램을 관리하는 기능**<br>
CPU를 점유해야 할 프로세스를 결정하고 실제로 CPU를 프로세스에 할당하며 프로세스 간 공유 자원 접근과 통신 등을 관리

- 프로레스, 스레드
- 스케줄링
- 동기화
- IPC 통신

#### (2) 저장장치 관리

: **메인 메모리(1차 저장장치)와 하드디스크, NAND(2차 저장장치) 등을 관리하는 기능**

| 1차 저장장치                                      | 2차 저장장치                                                       |
| ------------------------------------------------- | ------------------------------------------------------------------ |
| 프로세스에 할당하는 메모리 영역의 할당과 해제     | 파일 형식의 데이터 저장                                            |
| 각 메모리 영역간의 침범 방지                      | 파일 데이터 관리를 위한 파일 시스템을 OS에서 처리                  |
| 메인 메모리의 효율적 활용을 위한 가상 메모리 기능 | `FAT, NTFS, EXT2, JFS, XFS`등 많은 파일 시스템들이 개발되어 사용중 |

- 메모리 관리
- 가상 메모리
- 파일 시스템

#### (3) 네트워킹

: **TCP/IP 기반의 인터넷에 연결하거나 응용 프로그램이 네트워크를 사용하려면 운영체제에서 네트워크 프로토콜을 지원**<br>
현재 상용 OS들은 다양하고 많은 네트워크 프로토콜 지원. <br>
OS는 HW를 운영 및 관리하고 명령어를 제어하며 응용프로그램 및 HW를 SW적으로 제어 및 관리해야함.

- TCP/IP
- 기타 프로토콜

#### (4) 사용자 관리

: **각 계정을 관리할 수 있는 기능 필요** <br>
사용자 별로 프라이버시와 보안을 위해 개인 파일에 대해선 다른 사용자가 접근할 수 없도록 해야한다.<br>
파일이나 시스템 자원에 접근 권한을 지정할 수 있도록 지원

- 계정 관리
- 접근권한 관리

#### (5) 디바이스 드라이버

: **하드웨어를 추상화 해주는 계층**<br>
하드웨어의 종류가 많은 만큼 운영체제 내부의 디바이스 드라이버도 많이 존재하며, 이러한 수많은 디바이스 드라이버들을 관리하는 기능 또한 운영 체제가 담당

- 순차접근 장치
- 임의접근 장치
- 네트워크 장치

---

### 3) 프로세스와 스레드

#### 의미

**프로세스** : 프로그램을 메모리상에서 실행중인 작업<br>
**스레드** : 프로세스 안에서 실행되는 여러 흐름 단위

- 각 프로세스마다 최소 1개의 스레드 소유 (메인 스레드 포함)

#### (1) 프로세스

**각각 별도의 주소공간을 독립적으로 할당받음**

- `Code` : 코드 자체를 구성하는 메모리 영역(프로그램 명령)
- `Data` : 전역 및 정적 변수, 배열 등
  - 초기화 된 데이터는 data 영역에 저장
  - 초기화 되지 않은 데이터는 bss 영역에 저장
- `Heap` : 동적 할당 시 사용 (new(), amlloc() 등)
- `Stack` : 지역변수, 매개변수, 리턴 값(임시 메모리 영역)

#### (2) 스레드

**Stack만 따로 할당 받고 나머지 영역은 서로 공유**

- Stack 영역만 따로 할당받는 이유
  - 스레드는 독립적인 동작을 수행하기 위해 존재
  - 독립적으로 함수를 호출하기 위해 함수의 매개변수, 지역변수 등을 저장하는 스택 메모리 영역은 독립적으로 할당받아야 함.

> ➡️ 프로세스는 자신만의 고유 공간과 자원을 할당 받아 사용 vs 스레드는 다른 스레드와 공간, 자원을 공유하면서 사용

#### (3) 멀티 프로세스

**하나의 프로그램을 여러개의 프로세스로 구성하여 각 프로세스가 병렬적으로 작업을 수행하는 것**
|장점|단점|
|---|---|
|안전성 : 메모리 침범 문제를 OS 차원에서 해결|오버헤드 발생 : 각각 독립된 메모리 영역을 갖고 있어 작업량 많을수록 오버헤드|
||Conext Switching으로 인한 성능저하|

- Context Switching이란?<br>
  **프로세스의 상태정보를 저장하고 복원하는 일련의 과정**
  - 동작중인 프로세스가 대기하면서 해당 프로세스의 상태를 보관하고 대기하고 있던 다음 순번의 프로세스가 동작하면서 이전에 보관했던 프로세스 상태를 복구하는 과정

#### (4) 멀티 스레드

**하나의 응용 프로그램에서 여러 스레드를 구성해 각 스레드가 하나의 작업을 처리하는 것(고유 메모리를 통하여)**
|장점|단점|
|---|---|
|시간 및 자원 손실의 감소 : 공유 메모리이므로 시간 및 손실 감소|안전성 문제 : 하나의 스레드가 데이터 공간을 망가뜨리면 모든 스레드가 작동 불능 상태(공유 메모리를 갖기 때문)|

- Critical Section 기법 : 멀티스레드의 안전성 대비
  - 하나의 스레드가 공유 데이터 값을 변경하는 시점에 다른 스레드가 그 값을 읽으려할 때발생하는 문제를 해결하기 위한 동기화 과정
  - 상호 배제, 진행, 한정된 대기를 충족해야함.

---

### 4) 프로세스의 주소 공간

**프로그램이 CPu에 의해 실행되면 프로세스가 생성되고 메모리에 `프로세스 주소 공간`이 할당**<br><br>
구성 : **코드 Segment, 데이터 Segment, 스택 Segment**

- 코드 Segment : 프로그램 소스 코드 저장
- 데이터 Segment : 전역 변수 저장
- 스택 Segment : 함수, 지역 변수 저장

```
<이렇게 구역을 나누는 이유>

최대한 데이터를 공유하여 메모리 사용량을 줄여야 하기 때문.
Code는 같은 프로그램 자체에서는 모두 같은 내용이기 떄문에 따로 관리하여 공유
Stack과 데이터를 나눈 이유는, 스택 구조의 특성과 전역 변수의 활성을 위한 것

프로그램의 함수와 지역 변수는, LIFO(가장 나중에 들어간게 먼저 나옴)특성을 가진 스택에서 실행된다.
따라서 이 함수들 안에서 공통으로 사용하는 '전역 변수'는 따로 지정해주면 메모리를 아낄 수 있다.
```
